<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>نموذج التسجيل</title>
<style>
  body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    max-width: 500px;
    margin: 20px auto;
    padding: 10px;
    background: #f9f9f9;
    color: #333;
  }
  label {
    display: block;
    margin: 12px 0 5px 0;
    font-weight: bold;
  }
  input[type="text"],
  input[type="number"],
  input[type="tel"],
  select {
    width: 100%;
    padding: 8px;
    font-size: 16px;
    box-sizing: border-box;
  }
  .phone-group {
    display: flex;
    gap: 10px;
  }
  .phone-group select {
    width: 40%;
  }
  .phone-group input[type="tel"] {
    width: 60%;
  }
  .gender-options {
    display: flex;
    gap: 15px;
    margin: 5px 0 15px 0;
  }
  .gender-option {
    flex: 1;
    padding: 10px 0;
    text-align: center;
    border: 2px solid #aaa;
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    font-weight: bold;
    background-color: white;
    transition: background-color 0.3s, border-color 0.3s;
  }
  .gender-option.selected {
    background-color: #007bff;
    color: white;
    border-color: #007bff;
  }
  button {
    margin-top: 20px;
    width: 100%;
    background-color: #007bff;
    color: white;
    font-size: 18px;
    border: none;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  button:hover {
    background-color: #0056b3;
  }
  /* التنبيهات */
  .alerts {
    background: #fffbe6;
    border: 1px solid #ffe58f;
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
  }
  .alerts p {
    margin: 8px 0;
    font-size: 15px;
  }
  .payment-options {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 10px;
  }
  .payment-option {
    flex: 1 1 calc(50% - 12px);
    padding: 10px;
    border: 2px solid #aaa;
    border-radius: 6px;
    text-align: center;
    cursor: pointer;
    user-select: none;
    background-color: white;
    font-weight: bold;
    transition: background-color 0.3s, border-color 0.3s;
  }
  .payment-option.selected {
    background-color: #28a745;
    color: white;
    border-color: #28a745;
  }
  /* الرقم الأكاديمي */
  #academicCodeInput {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin: 15px 0;
  }
  #academicCodeInput input {
    width: 40px;
    height: 50px;
    font-size: 24px;
    text-align: center;
    border: 2px solid #aaa;
    border-radius: 6px;
    outline: none;
    transition: border-color 0.3s;
  }
  #academicCodeInput input:focus {
    border-color: #007bff;
  }
  /* رسالة النجاح */
  #successMessage {
    text-align: center;
    font-size: 20px;
    color: #28a745;
    margin-top: 25px;
    display: none;
  }
</style>
</head>
<body>

<h2>📋 استمارة التسجيل</h2>

<label>الاسم الثلاثي:</label>
<input type="text" id="fullName" placeholder="اكتب اسمك الثلاثي" required />

<label>الجنس:</label>
<div class="gender-options">
  <div class="gender-option" onclick="selectGender(this, 'ذكر')">ذكر</div>
  <div class="gender-option" onclick="selectGender(this, 'أنثى')">أنثى</div>
</div>
<input type="hidden" id="genderInput" required />

<label>دولة الإقامة:</label>
<input type="text" id="country" placeholder="مثال: السعودية" required />

<label>العمر:</label>
<input type="number" id="age" placeholder="مثال: 25" min="5" max="100" required />

<label>رقم الجوال:</label>
<div class="phone-group">
  <select id="countryCode" required>
    <option value="">+ رمز الدولة</option>
    <option value="+966">🇸🇦 +966</option>
    <option value="+20">🇪🇬 +20</option>
    <option value="+963">🇸🇾 +963</option>
    <option value="+964">🇮🇶 +964</option>
    <option value="+971">🇦🇪 +971</option>
    <option value="+962">🇯🇴 +962</option>
    <option value="+965">🇰🇼 +965</option>
    <option value="+973">🇧🇭 +973</option>
    <option value="+968">🇴🇲 +968</option>
    <option value="+212">🇲🇦 +212</option>
  </select>
  <input type="tel" id="phone" placeholder="رقم الهاتف" required />
</div>

<button onclick="showNotes()">التالي</button>

<!-- قسم التنبيهات -->
<div class="alerts" id="notesSection" style="display:none;">
  <h3>📌 تنبيهات هامة حول الدورة</h3>
  <p><b>أولاً: رسوم الدورة</b> ليست مقابل الدروس بل مقابل التمارين، المذاكرات، الدعم، الشهادة. وتُعد صدقة لدعم المشروع.</p>
  <p><b>ثانيًا: حيادية المشايخ</b> المشايخ لا علاقة لهم بأي رسوم ولا يتقاضون شيئًا.</p>
  <p><b>ثالثًا: الشهادة والجائزة</b> الشهادة برسوم 5$. قرعة بـ 200$ كل 6 أشهر للفائزين.</p>
  <p><b>رابعًا: دعم المشروع</b> لضمان استمراريته من حيث الإشراف والتقني.</p>
  <p><b>💰 كم ترغب في دفعه؟</b></p>

  <div class="payment-options" id="paymentOptions">
    <div class="payment-option" onclick="selectPayment(this, '10+تبرع')">10$ + تبرع</div>
    <div class="payment-option" onclick="selectPayment(this, '10')">10$ فقط</div>
    <div class="payment-option" onclick="selectPayment(this, '5')">5$ فقط</div>
    <div class="payment-option" onclick="selectPayment(this, 'free')">مجانًا</div>
  </div>

  <button onclick="showVerification()">التالي</button>
</div>

<!-- قسم إدخال الرقم الأكاديمي -->
<div id="verificationSection" style="display:none; margin-top: 20px;">
  <label>📩 تم إرسال الرقم الأكاديمي عبر واتساب</label>
  <p>يرجى إدخال الرقم الأكاديمي:</p>

  <div id="academicCodeInput">
    <input type="text" maxlength="1" class="code-box" oninput="moveNext(this)" onkeydown="movePrev(event, this)" />
    <input type="text" maxlength="1" class="code-box" oninput="moveNext(this)" onkeydown="movePrev(event, this)" />
    <input type="text" maxlength="1" class="code-box" oninput="moveNext(this)" onkeydown="movePrev(event, this)" />
    <input type="text" maxlength="1" class="code-box" oninput="moveNext(this)" onkeydown="movePrev(event, this)" />
    <input type="text" maxlength="1" class="code-box" oninput="moveNext(this)" onkeydown="movePrev(event, this)" />
    <input type="text" maxlength="1" class="code-box" oninput="moveNext(this)" onkeydown="movePrev(event, this)" />
  </div>

  <button onclick="verifyCode()">✅ تحقق</button>
</div>

<!-- رسالة النجاح -->
<div id="successMessage">✅ تم التسجيل بنجاح!<br>شكرًا لك، تم إرسال رسالة عبر واتساب.</div>

<script>
  // اختيار الجنس
  function selectGender(element, gender) {
    document.querySelectorAll('.gender-option').forEach(el => {
      el.classList.remove('selected');
    });
    element.classList.add('selected');
    document.getElementById('genderInput').value = gender;
  }

  // اختيار طريقة الدفع
  let selectedPayment = null;
  function selectPayment(element, payment) {
    document.querySelectorAll('.payment-option').forEach(el => {
      el.classList.remove('selected');
    });
    element.classList.add('selected');
    selectedPayment = payment;
  }

  // الزر التالي من بيانات التسجيل لعرض التنبيهات
  function showNotes() {
    const fullName = document.getElementById('fullName').value.trim();
    const gender = document.getElementById('genderInput').value;
    const country = document.getElementById('country').value.trim();
    const age = document.getElementById('age').value.trim();
    const countryCode = document.getElementById('countryCode').value;
    const phone = document.getElementById('phone').value.trim();

    if (!fullName) { alert('يرجى إدخال الاسم الثلاثي'); return; }
    if (!gender) { alert('يرجى اختيار الجنس'); return; }
    if (!country) { alert('يرجى إدخال دولة الإقامة'); return; }
    if (!age || age < 5 || age > 100) { alert('يرجى إدخال عمر صحيح بين 5 و 100'); return; }
    if (!countryCode) { alert('يرجى اختيار رمز الدولة'); return; }
    if (!phone) { alert('يرجى إدخال رقم الجوال'); return; }

    document.getElementById('notesSection').style.display = 'block';
  }

  // الزر التالي من التنبيهات لقسم التحقق
  function showVerification() {
    if (!selectedPayment) {
      alert('يرجى اختيار مبلغ الدفع أو المجانًا');
      return;
    }

    // لو الدفع مجاني نتخطى التحقق (حسب طلبك ممكن تعدل هنا)
    if (selectedPayment === 'free') {
      showSuccess();
    } else {
      document.getElementById('verificationSection').style.display = 'block';
      document.getElementById('notesSection').style.display = 'none';
    }
  }

  // التنقل بين خانات الرقم الأكاديمي
  function moveNext(current) {
    if (current.value.length === current.maxLength) {
      let next = current.nextElementSibling;
      if (next && next.tagName === 'INPUT') {
        next.focus();
      }
    }
  }

  function movePrev(event, current) {
    if (event.key === "Backspace" && current.value.length === 0) {
      let prev = current.previousElementSibling;
      if (prev && prev.tagName === 'INPUT') {
        prev.focus();
      }
    }
  }

  // تحقق الرقم الأكاديمي
  function verifyCode() {
    const boxes = document.querySelectorAll('.code-box');
    let code = '';
    for (let box of boxes) {
      if (box.value.trim() === '') {
        alert('يرجى ملء جميع خانات الرقم الأكاديمي');
        box.focus();
        return;
      }
      code += box.value.trim();
    }
    // هنا تضع كود التحقق الفعلي من الرقم الأكاديمي مع قاعدة بيانات أو منطق آخر

    // لأغراض العرض فقط:
    alert('تم إدخال الرقم الأكاديمي: ' + code);
    showSuccess();
  }

  // عرض رسالة النجاح
  function showSuccess() {
    document.getElementById('verificationSection').style.display = 'none';
    document.getElementById('notesSection').style.display = 'none';
    document.querySelector('button').style.display = 'none'; // نخفي زر التالي
    document.getElementById('successMessage').style.display = 'block';
  }
</script>

</body>
</html>
